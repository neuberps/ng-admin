<div class="container">
  <h1 class="mt-4">Serviços</h1>
  <ol class="breadcrumb mb-4">
    <li class="breadcrumb-item active">{{ service.id ? 'Editar serviço' : 'Cadastrar serviço'}}</li>
  </ol>
</div>

<div class="container">
  <form #serviceform="ngForm" (ngSubmit)="onSubmit()">
    <div class="row">
      <div class="col-md-12">
        <div class="alert alert-success" role="alert" *ngIf="success == true">
          Serviço adicionado/salvo com sucesso!
        </div>
      </div>
    </div>

    <div class="row" *ngIf="service.id">
      <div class="col-md-12">
        <div class="form-group">
          <label>ID:</label>
          <input type="text" class="form-control" [(ngModel)]="service.id" name="id" disabled="true" />
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <label>Nome: *</label>
          <input placeholder="Digite o nome do serviço" type="text" class="form-control" [(ngModel)]="service.name"
            name="name" />
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-group">
          <label>Email: *</label>
          <input placeholder="Digite o e-mail" type="text" class="form-control" [(ngModel)]="service.email"
            name="email" />
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <label>Categoria: *</label>
          <select class="form-select" aria-label="Default select" [(ngModel)]="service.idCategory" name="categoria">
            <option selected>Selecione uma categoria</option>
            <option *ngFor="let categoria of categories" [value]="categoria.id">{{ categoria.name }}</option>
          </select>
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-group">
          <label>Status: *</label>
          <input placeholder="Qual status do serviço [true = ativo / false = inativo]" type="text" class="form-control"
            [(ngModel)]="service.status" name="status" />
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <label>Descrição: *</label>
          <input placeholder="Descreva o serviço" type="text" class="form-control" [(ngModel)]="service.description"
            name="description" />
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-group">
          <label>Imagem: *</label>
          <input placeholder="Descreva o nome da imagem com a sua extenção. Ex.: image1.jpeg" type="text" class="form-control" [(ngModel)]="service.image"
            name="image" />
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <label>Preço: *</label>
          <input placeholder="Digite o valor do serviço" type="text" class="form-control" [(ngModel)]="service.price"
            name="price" />
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-group">
          <label>Tempo de Execução: (Mês)*</label>
          <input placeholder="Digite o tempo de execução do serviço" type="text" class="form-control"
            [(ngModel)]="service.runtime" name="runtime" />
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <label>Prazo de Serviço: (Mês)*</label>
          <input placeholder="Digite o prazo do serviço" type="text" class="form-control" [(ngModel)]="service.term"
            name="term" />
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-group">
          <label>Registro: *</label>
          <input placeholder="Serviço registrado por usuario ou admin" type="text" class="form-control"
            [(ngModel)]="service.registryUser" name="term" />
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-3">
        <button type="submit" class="btn btn-success" *ngIf="!service.id">
          <i class="fa fa-save"></i> Salvar
        </button>

        <button type="submit" class="btn btn-success" *ngIf="service.id">
          <i class="fa fa-sync-alt"></i> Atualizar
        </button>

        <button type="button" class="btn btn-secondary ml-1" (click)="returnList()">
          <i class="fa fa-arrow-alt-circle-left"></i> Voltar
        </button>

        <button type="button" class="btn btn-danger ml-1" *ngIf="service.id" (click)="confirmDeletion(service)"
          data-bs-toggle="modal" data-bs-target="#exampleModal">
          <i class="fa fa-trash"></i> Excluir
        </button>
      </div>
    </div>
  </form>
</div>

<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Excluir Serviço?</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Deseja realmente excluir o serviço <b>{{service.name}}</b>?
      </div>
      <div class="modal-footer">

        <button type="button" data-dismiss="modal" class="btn btn-success" (click)="deleteService()"
          routerLink="/service-list">Confirmar</button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i
            class="fa fa-arrow-alt-circle-left"></i> Voltar</button>

      </div>
    </div>
  </div>
</div>
